<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taqqit - Discover & Save Ideas</title>
    <style>
:root {
    --primary: #ff6b35;
    --primary-hover: #ff8555;
    --bg-dark: #0a0a0a;
    --bg-medium: #1a1a1a;
    --bg-light: #2a2a2a;
    --bg-lighter: #3a3a3a;
    --text-light: #e0e0e0;
    --text-medium: #c0c0c0;
    --text-dim: #a0a0a0;
    --text-dark: #0a0a0a;
    --border: #2a2a2a;
    --shadow: rgba(255, 107, 53, 0.2);
    --shadow-strong: rgba(255, 107, 53, 0.4);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
    background: var(--bg-dark);
    color: var(--text-light);
    line-height: 1.6;
}

header {
    background: var(--bg-medium);
    padding: 16px 24px;
    position: sticky;
    top: 0;
    z-index: 100;
    border-bottom: 1px solid var(--border);
}

nav {
    display: flex;
    align-items: center;
    gap: 24px;
    max-width: 1600px;
    margin: 0 auto;
}

.logo {
    font-size: 28px;
    font-weight: 800;
    color: var(--primary);
    letter-spacing: -1px;
    cursor: pointer;
    user-select: none;
}

.search-bar {
    flex: 1;
    max-width: 600px;
}

.search-bar input {
    width: 100%;
    padding: 12px 20px;
    background: var(--bg-light);
    border: 2px solid var(--bg-lighter);
    border-radius: 24px;
    color: var(--text-light);
    font-size: 15px;
    transition: all 0.2s ease;
}

.search-bar input::placeholder {
    color: var(--text-dim);
}

.search-bar input:focus {
    outline: none;
    border-color: var(--primary);
    background: var(--bg-medium);
}

.nav-links {
    display: flex;
    gap: 16px;
    align-items: center;
}

.nav-btn {
    padding: 10px 20px;
    background: transparent;
    color: var(--text-light);
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-size: 15px;
    font-weight: 600;
    transition: all 0.2s ease;
}

.nav-btn:hover {
    background: var(--bg-light);
}

.nav-btn.primary {
    background: var(--primary);
    color: var(--text-dark);
}

.nav-btn.primary:hover {
    background: var(--primary-hover);
}

.categories {
    background: var(--bg-medium);
    padding: 20px 24px;
    border-bottom: 1px solid var(--border);
    overflow-x: auto;
    white-space: nowrap;
}

.categories::-webkit-scrollbar {
    height: 6px;
}

.categories::-webkit-scrollbar-track {
    background: var(--bg-light);
}

.categories::-webkit-scrollbar-thumb {
    background: var(--primary);
    border-radius: 3px;
}

.category-container {
    display: flex;
    gap: 12px;
    max-width: 1600px;
    margin: 0 auto;
}

.category-btn {
    padding: 10px 24px;
    background: var(--bg-light);
    border: 2px solid var(--bg-lighter);
    border-radius: 24px;
    color: var(--text-light);
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.category-btn:hover,
.category-btn.active {
    background: var(--primary);
    border-color: var(--primary);
    color: var(--text-dark);
}

.container {
    max-width: 1600px;
    margin: 0 auto;
    padding: 24px;
}

.masonry-grid {
    column-count: 5;
    column-gap: 16px;
}

@media (max-width: 1400px) {
    .masonry-grid {
        column-count: 4;
    }
}

@media (max-width: 1100px) {
    .masonry-grid {
        column-count: 3;
    }
}

@media (max-width: 800px) {
    .masonry-grid {
        column-count: 2;
    }
    
    .nav-links {
        gap: 8px;
    }
    
    .nav-btn {
        padding: 8px 12px;
        font-size: 13px;
    }
}

@media (max-width: 500px) {
    .masonry-grid {
        column-count: 1;
    }
    
    nav {
        flex-wrap: wrap;
        gap: 12px;
    }
    
    .search-bar {
        order: 3;
        max-width: 100%;
        width: 100%;
    }
}

.pin-card {
    break-inside: avoid;
    margin-bottom: 16px;
    background: var(--bg-medium);
    border-radius: 16px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.pin-card:hover {
    transform: translateY(-4px);
    border-color: var(--primary);
    box-shadow: 0 8px 24px var(--shadow);
}

.pin-image {
    width: 100%;
    display: block;
    object-fit: cover;
}

.pin-content {
    padding: 16px;
}

.pin-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-light);
    margin-bottom: 8px;
    line-height: 1.4;
}

.pin-description {
    font-size: 13px;
    color: var(--text-dim);
    line-height: 1.5;
    margin-bottom: 12px;
}

.pin-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.pin-user {
    display: flex;
    align-items: center;
    gap: 8px;
}

.user-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--primary);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 12px;
    color: var(--text-dark);
}

.user-name {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-medium);
}

.save-btn {
    padding: 8px 16px;
    background: var(--primary);
    border: none;
    border-radius: 20px;
    color: var(--text-dark);
    font-weight: 700;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.save-btn:hover {
    background: var(--primary-hover);
    transform: scale(1.05);
}

.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.modal.active {
    display: flex;
}

.modal-content {
    background: var(--bg-medium);
    border-radius: 24px;
    max-width: 1000px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    border: 2px solid var(--border);
}

.modal-content::-webkit-scrollbar {
    width: 8px;
}

.modal-content::-webkit-scrollbar-track {
    background: var(--bg-light);
}

.modal-content::-webkit-scrollbar-thumb {
    background: var(--primary);
    border-radius: 4px;
}

.modal-close {
    position: absolute;
    top: 16px;
    right: 16px;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--bg-light);
    border: none;
    color: var(--text-light);
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
    transition: all 0.2s ease;
}

.modal-close:hover {
    background: var(--primary);
    color: var(--text-dark);
}

.modal-image {
    width: 100%;
    border-radius: 24px 24px 0 0;
    object-fit: cover;
    max-height: 500px;
}

.modal-info {
    padding: 32px;
}

.modal-title {
    font-size: 28px;
    font-weight: 800;
    margin-bottom: 16px;
    color: var(--text-light);
}

.modal-description {
    font-size: 16px;
    line-height: 1.6;
    color: var(--text-medium);
    margin-bottom: 24px;
}

.fab {
    position: fixed;
    bottom: 32px;
    right: 32px;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: var(--primary);
    border: none;
    color: var(--text-dark);
    font-size: 28px;
    cursor: pointer;
    box-shadow: 0 4px 12px var(--shadow-strong);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 300;
}

.fab:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(255, 107, 53, 0.6);
}

.empty-state {
    text-align: center;
    padding: 80px 20px;
    color: var(--text-dim);
}

.empty-state h3 {
    font-size: 24px;
    margin-bottom: 12px;
    color: var(--text-medium);
}

.empty-state p {
    font-size: 16px;
}
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">TAQQIT</div>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search: liminal spaces, backrooms, vaporwave...">
            </div>
            <div class="nav-links">
                <button class="nav-btn">Home</button>
                <button class="nav-btn">Explore</button>
                <button class="nav-btn">Create</button>
                <button class="nav-btn primary">Sign Up</button>
            </div>
        </nav>
    </header>

    <div class="categories">
        <div class="category-container" id="categoryContainer"></div>
    </div>

    <div class="container">
        <div class="masonry-grid" id="grid"></div>
    </div>

    <button class="fab" id="fabBtn">+</button>

    <div class="modal" id="modal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">×</button>
            <img class="modal-image" id="modalImage" src="" alt="">
            <div class="modal-info">
                <h2 class="modal-title" id="modalTitle"></h2>
                <p class="modal-description" id="modalDescription"></p>
                <div class="pin-footer">
                    <div class="pin-user">
                        <div class="user-avatar" id="modalAvatar"></div>
                        <div class="user-name" id="modalUser"></div>
                    </div>
                    <button class="save-btn" style="padding: 12px 24px; font-size: 15px;">Save</button>
                </div>
            </div>
        </div>
    </div>

    <script>
// Categories
const categories = ["All","Cars & Motorcycles","Fitness & Training","Style & Fashion","Tech & Gadgets","Watches","Cooking & BBQ","Home & Workshop","Travel & Adventure","Business & Finance","Sports","Gaming"];

// Pins data - REAL interesting rabbit holes
const pins = [
    {title: "The Backrooms: Level 0",description: "The original liminal space. Yellow wallpaper, humming fluorescent lights, 600 million square miles of randomly segmented empty rooms. You no-clipped out of reality.",user: "Kane P.",category: "Gaming",image: "https://images.unsplash.com/photo-1541746972996-4e0b0f43e02a?w=400&h=320",height: 320},
    
    {title: "Dead Mall Aesthetic",description: "Abandoned shopping centers frozen in 1992. The architecture of American consumerism's slow death. Fountains turned off. Food courts with no people.",user: "Dan B.",category: "Travel & Adventure",image: "https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400&h=280",height: 280},
    
    {title: "Vaporwave Origins & Death",description: "Started as satirical capitalism critique. Became the aesthetic it mocked. Floral Shoppe. Blank Banshee. The genre that ate itself.",user: "Macintosh P.",category: "Tech & Gadgets",image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&h=340",height: 340},
    
    {title: "Brutalist Bus Stops of USSR",description: "Concrete sculptures disguised as shelter. Yugoslav architects making art for commuters. Photography book sold for $1,200. Soviet futurism frozen.",user: "Christopher H.",category: "Travel & Adventure",image: "https://images.unsplash.com/photo-1513467535987-fd81bc7d62f8?w=400&h=300",height: 300},
    
    {title: "The Witness: Environmental Storytelling",description: "Jonathan Blow's $6M puzzle game. No text, no NPCs. Island speaks through architecture. Players find meaning in absence. 677 puzzles hide the real puzzle.",user: "Jonathan B.",category: "Gaming",image: "https://images.unsplash.com/photo-1518895312237-a9e23508077d?w=400&h=280",height: 280},
    
    {title: "Kowloon Walled City Density",description: "33,000 people per square kilometer. No government, no building codes for 40 years. Demolished 1993. Cyberpunk made real. Vertical slums as organism.",user: "Greg G.",category: "Home & Workshop",image: "https://images.unsplash.com/photo-1541544181051-e46607bc22a4?w=400&h=310",height: 310},
    
    {title: "Antarctic Pyramid Discovery",description: "Google Earth coordinates: 79°58'39.25\"S 81°57'32.21\"W. Natural rock formation or evidence of ancient civilization? The debate that won't die.",user: "coord hunter",category: "Travel & Adventure",image: "https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=400&h=360",height: 360},
    
    {title: "The Dyatlov Pass Incident",description: "Nine hikers died in Ural Mountains, 1959. Tent cut from inside. Radiation on clothes. Crushed ribs, no external trauma. Still unexplained.",user: "Yuri Y.",category: "Travel & Adventure",image: "https://images.unsplash.com/photo-1483728642387-6c3bdd6c93e5?w=400&h=290",height: 290},
    
    {title: "Numbers Stations: UVB-76",description: "Russian radio buzzes since 1982. Sometimes voice reads numbers. Purpose unknown. Still broadcasting. 4625 kHz. Listen at night.",user: "Signal_",category: "Tech & Gadgets",image: "https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?w=400&h=320",height: 320},
    
    {title: "Weirdcore Aesthetics",description: "Intentionally unsettling low-quality dreamlike images. Text overlays asking existential questions. The opposite of Instagram. Eyes in wrong places.",user: "glitch.jpg",category: "Style & Fashion",image: "https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?w=400&h=340",height: 340},
    
    {title: "Mystery of Cicada 3301",description: "Internet's most elaborate puzzle. Posted 2012-2014. Cryptography, steganography, ancient texts. Recruits for what? Organization never confirmed. Unsolved.",user: "Anonymous",category: "Tech & Gadgets",image: "https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?w=400&h=270",height: 270},
    
    {title: "Myhouse.wad Explained",description: "DOOM mod that's actually psychological horror. Infinite bathroom. House changes. Mark's trauma encoded in level geometry. Backrooms before Backrooms.",user: "veddge",category: "Gaming",image: "https://images.unsplash.com/photo-1538481199705-c710c4e965fc?w=400&h=300",height: 300},
    
    {title: "Soviet Microdistricts",description: "Khrushchyovka apartments. Identical 5-story blocks. 64 million people still live in them. Social engineering through architecture. Community by force.",user: "Nikita K.",category: "Home & Workshop",image: "https://images.unsplash.com/photo-1513694203232-719a280e022f?w=400&h=290",height: 290},
    
    {title: "Analog Horror Format",description: "Local 58, Gemini Home Entertainment. Found footage VHS tapes from alternate timeline. Emergency broadcasts going wrong. The analog corrupts.",user: "Kris S.",category: "Gaming",image: "https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=400&h=310",height: 310},
    
    {title: "Max Headroom Broadcast Signal Intrusion",description: "Nov 22, 1987. Chicago TV hijacked. Man in Max Headroom mask. Never caught. 14 years before 9/11. FBI's longest open investigation.",user: "ChicagoTV",category: "Tech & Gadgets",image: "https://images.unsplash.com/photo-1560169897-fc0cdbdfa4d5?w=400&h=280",height: 280},
    
    {title: "Uncanny Valley in Robotics",description: "Masahiro Mori's 1970 theory. Robots look 99% human = revulsion. The valley between mechanical and human. Why CGI animals feel wrong.",user: "Masahiro M.",category: "Tech & Gadgets",image: "https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=400&h=300",height: 300},
    
    {title: "Centralia, PA: Town on Fire",description: "Coal mine fire burning since 1962. Won't stop until 2262. Population: 5. Inspiration for Silent Hill. Ground temperature: 900°F.",user: "Centralia",category: "Travel & Adventure",image: "https://images.unsplash.com/photo-1551632811-561732d1e306?w=400&h=340",height: 340},
    
    {title: "Doggerland: Atlantis of North Sea",description: "Britain connected to Europe until 6500 BC. Flooded after ice age. Stone age civilization underwater. Fishing nets pull up mammoth bones.",user: "Vincent G.",category: "Travel & Adventure",image: "https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=400&h=280",height: 280},
    
    {title: "SCP Foundation as Literature",description: "Collaborative fiction. 7,000+ entries. Clinical tone hiding cosmic horror. What if X-Files was real? The database that became mythology.",user: "Dr. Bright",category: "Gaming",image: "https://images.unsplash.com/photo-1515879218367-8466d910aaa4?w=400&h=310",height: 310},
    
    {title: "Phantom Time Hypothesis",description: "Heribert Illig claims years 614-911 AD never happened. Charlemagne fictional. Calendar fabricated. Evidence: missing archaeological layer. Academic community: no.",user: "Heribert I.",category: "Travel & Adventure",image: "https://images.unsplash.com/photo-1509023464722-18d996393ca8?w=400&h=260",height: 260},
    
    {title: "Stroad: The Ugliest Thing",description: "Street + Road = Stroad. Too fast for pedestrians, too slow for cars. American suburbia's design flaw. Not Just Bikes exposed it. You see it everywhere now.",user: "Jason S.",category: "Cars & Motorcycles",image: "https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=400&h=330",height: 330},
    
    {title: "Aokigahara Forest Silence",description: "Japan's suicide forest. Magnetic iron deposits scramble compasses. So dense sound stops. Annual body sweep. Signs asking you to reconsider.",user: "forest walker",category: "Travel & Adventure",image: "https://images.unsplash.com/photo-1511497584788-876760111969?w=400&h=290",height: 290},
    
    {title: "Loneliness Epidemic Data",description: "60% of young men report having no close friends. Male friendship crisis. Third places disappeared. Bowling Alone was right. The Great Isolation quantified.",user: "Robert P.",category: "Business & Finance",image: "https://images.unsplash.com/photo-1494178270175-e96de2971df9?w=400&h=320",height: 320},
    
    {title: "Project Cybersyn Dashboard",description: "Chile's socialist AI from 1971. Stafford Beer designed economy controller. Ops room looks like Enterprise bridge. Ended with Pinochet coup.",user: "Salvador A.",category: "Tech & Gadgets",image: "https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=400&h=340",height: 340},
    
    {title: "Poolrooms Aesthetic",description: "Subgenre of Backrooms. Indoor pools at 3AM. Tile echoes. Chlorine smell encoded in pixels. The uncanny of recreational spaces empty.",user: "poolcore",category: "Gaming",image: "https://images.unsplash.com/photo-1519455953755-af066f52f1a6?w=400&h=270",height: 270},
    
    {title: "Helvetica's Accidental Dominance",description: "1957 typeface. Now in 100 major brands. IRS tax forms. NYC Subway. Corporate neutrality as style. The font that ate the world.",user: "Eduard H.",category: "Style & Fashion",image: "https://images.unsplash.com/photo-1590859808308-3d2d9c515b1a?w=400&h=320",height: 320},
    
    {title: "Russian Sleep Experiment",description: "Creepypasta. Five prisoners. Experimental gas. 15 days no sleep. What happened after. Entire internet knows this story. All fake. Still scary.",user: "unknown",category: "Fitness & Training",image: "https://images.unsplash.com/photo-1541845157-a6d2d100c931?w=400&h=300",height: 300},
    
    {title: "Shipping Container Architecture",description: "$3,000 for 320 sq ft structure. Stack them. Cut windows. Modern prefab. Actual solution or Pinterest aesthetic? Both. Neither.",user: "Adam K.",category: "Home & Workshop",image: "https://images.unsplash.com/photo-1562259929-1ba40a1ec1d6?w=400&h=280",height: 280},
    
    {title: "Kessler Syndrome",description: "Cascading satellite collisions. One collision creates debris. Debris hits more satellites. Chain reaction. Space becomes unusable. We're close.",user: "Donald K.",category: "Tech & Gadgets",image: "https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=400&h=340",height: 340},
    
    {title: "Boring Dystopia Subreddit",description: "r/ABoringDystopia. GoFundMe for insulin. Uplifting news that's actually horrifying. Orphan crushing machine. The hell we normalized.",user: "reddit",category: "Business & Finance",image: "https://images.unsplash.com/photo-1552664730-d307ca884978?w=400&h=290",height: 290},
    
    {title: "Winchester Mystery House Logic",description: "Stairs to nowhere. Doors opening to walls. Sarah Winchester built for 38 years. No master plan. Guilt over rifle deaths. Architecture of madness.",user: "Sarah W.",category: "Home & Workshop",image: "https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=400&h=310",height: 310},
    
    {title: "The Bloop Sound",description: "1997. Ultra-low frequency underwater sound. Louder than any whale. Source: Unknown. NOAA recorded it. Likely iceberg. Possibly kraken. Decide yourself.",user: "NOAA",category: "Travel & Adventure",image: "https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=400&h=260",height: 260},
    
    {title: "Manufactured Authenticity",description: "Brooklyn coffee shop playbook. Exposed brick. Edison bulbs. Reclaimed wood. Same template globally. Authenticity industrialized. The aesthetic that won.",user: "urbanist",category: "Style & Fashion",image: "https://images.unsplash.com/photo-1442512595331-e89e73853f31?w=400&h=330",height: 330},
    
    {title: "Time Cube Theory",description: "Gene Ray's website. Four simultaneous days in single rotation. Educated stupid. Harmonic cube principle. Absolute madness. Preserved as internet artifact.",user: "Gene R.",category: "Business & Finance",image: "https://images.unsplash.com/photo-1451847251646-8a6c0dd1510c?w=400&h=290",height: 290},
    
    {title: "Planned Obsolescence Documentation",description: "Lightbulb cartel. iPhone batteries. Right to repair fight. Products designed to fail. The Phoebus cartel. Capitalism's dirtiest secret, documented.",user: "Louis R.",category: "Tech & Gadgets",image: "https://images.unsplash.com/photo-1563770660941-20978e870e26?w=400&h=320",height: 320},
    
    {title: "Liminal Spaces Philosophy",description: "Threshold between states. Airport at 4AM. Empty parking structure. Transitional non-places. Marc Augé's non-lieux. The architecture of nowhere.",user: "Marc A.",category: "Travel & Adventure",image: "https://images.unsplash.com/photo-1554310603-d39d43033735?w=400&h=300",height: 300},
    
    {title: "Mandela Effect Examples",description: "Berenstain Bears. Monopoly Man monocle. We are the champions. Collective false memory. Parallel universe or brain glitch? Internet can't agree.",user: "Fiona B.",category: "Gaming",image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=280",height: 280}
];

// State
let currentFilter = 'All';
const grid = document.getElementById('grid');
const modal = document.getElementById('modal');
const modalClose = document.getElementById('modalClose');
const modalImage = document.getElementById('modalImage');
const modalTitle = document.getElementById('modalTitle');
const modalDescription = document.getElementById('modalDescription');
const modalAvatar = document.getElementById('modalAvatar');
const modalUser = document.getElementById('modalUser');
const categoryContainer = document.getElementById('categoryContainer');
const searchInput = document.getElementById('searchInput');
const fabBtn = document.getElementById('fabBtn');

function createPinCard(pin, index) {
    const card = document.createElement('div');
    card.className = 'pin-card';
    card.onclick = () => openModal(pin, index);
    
    card.innerHTML = `
        <img class="pin-image" src="${pin.image}" alt="${pin.title}" style="height: ${pin.height}px;">
        <div class="pin-content">
            <h3 class="pin-title">${pin.title}</h3>
            <p class="pin-description">${pin.description}</p>
            <div class="pin-footer">
                <div class="pin-user">
                    <div class="user-avatar">${pin.user.charAt(0)}</div>
                    <div class="user-name">${pin.user}</div>
                </div>
                <button class="save-btn" onclick="event.stopPropagation(); alert('Saved: ${pin.title}');">Save</button>
            </div>
        </div>
    `;
    
    return card;
}

function loadPins(pinsToShow = pins) {
    grid.innerHTML = '';
    if (pinsToShow.length === 0) {
        grid.innerHTML = `<div class="empty-state"><h3>No pins found</h3><p>Try adjusting your search or filter</p></div>`;
        return;
    }
    pinsToShow.forEach((pin, index) => {
        grid.appendChild(createPinCard(pin, index));
    });
}

function filterByCategory(category) {
    currentFilter = category;
    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.textContent === category) {
            btn.classList.add('active');
        }
    });
    if (category === 'All') {
        loadPins(pins);
    } else {
        const filtered = pins.filter(pin => pin.category === category);
        loadPins(filtered);
    }
}

function searchPins(query) {
    query = query.toLowerCase().trim();
    if (!query) {
        filterByCategory(currentFilter);
        return;
    }
    const baseFilter = currentFilter === 'All' ? pins : pins.filter(pin => pin.category === currentFilter);
    const filtered = baseFilter.filter(pin => {
        return pin.title.toLowerCase().includes(query) ||
               pin.description.toLowerCase().includes(query) ||
               pin.user.toLowerCase().includes(query);
    });
    loadPins(filtered);
}

function openModal(pin, index) {
    modalImage.src = pin.image;
    modalTitle.textContent = pin.title;
    modalDescription.textContent = pin.description;
    modalUser.textContent = pin.user;
    modalAvatar.textContent = pin.user.charAt(0);
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeModal() {
    modal.classList.remove('active');
    document.body.style.overflow = 'auto';
}

function loadCategories() {
    categoryContainer.innerHTML = '';
    categories.forEach(category => {
        const btn = document.createElement('button');
        btn.className = 'category-btn';
        if (category === 'All') {
            btn.classList.add('active');
        }
        btn.textContent = category;
        btn.onclick = () => filterByCategory(category);
        categoryContainer.appendChild(btn);
    });
}

function init() {
    loadCategories();
    loadPins();
    modalClose.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeModal();
        }
    });
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeModal();
        }
    });
    let searchTimeout;
    searchInput.addEventListener('input', (e) => {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
            searchPins(e.target.value);
        }, 300);
    });
    fabBtn.addEventListener('click', () => {
        alert('Create new pin feature coming soon!');
    });
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
} else {
    init();
}
    </script>
</body>
</html>
